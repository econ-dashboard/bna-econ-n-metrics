<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8 /" />
    <title>Econ dashboard landing page</title>
    <link rel="stylesheet" href="static/css/landing-style.css" />
    <!-- <script src="static/js/home.js"> </script> -->
  </head>

  <body onload="loadJSON ()">
    <div class="page-container">
      <header class="page-header">
        <p>Local Economy Indicator</p>
      </header>
    </div>
    <div class="search-container">
      <div class="search-content">
        <!-- <input type="text" placeholder="Search county.." />
        <p class="dropdown"></p> -->
        <ul>
          <li class="stateClass" data-state="AL" id="AL">Alabama</li>
            <ul>
              <li class="countyClass">
                list of counties 
              </li>
            </ul>
          <li class="stateClass" data-state="AK" id="AK">Alaska</li>
            <ul>
              <li class="countyClass">
                list of counties 
              </li>
            </ul>
          <li class="stateClass" data-state="AZ" id="AZ">Arizona</li>
          <li class="stateClass" data-state="AR" id="AR">Arkansas</li>
          <li class="stateClass" data-state="CA" id="CA">California</li>
          <li class="stateClass" data-state="CO" id="CO">Colorado</li>
          <li class="stateClass" data-state="CT" id="CT">Connecticut</li>
          <li class="stateClass" data-state="DE" id="DE">Delware</li>
          <li class="stateClass" data-state="FL" id="FL">Florida</li>
          <li class="stateClass" data-state="GA" id="GA">Georgia</li>
          <li class="stateClass" data-state="HI" id="HI">Hawaii</li>
          <li class="stateClass" data-state="ID" id="ID">Idaho</li>
          <li class="stateClass" data-state="IL" id="IL">Illinois</li>
          <li class="stateClass" data-state="IN" id="IN">Indiana</li>
          <li class="stateClass" data-state="IA" id="IA">Iowa</li>
          <li class="stateClass" data-state="KS" id="KS">Kansas</li>
          <li class="stateClass" data-state="KY" id="KY">Kentucky</li>
          <li class="stateClass" data-state="LA" id="LA">Louisiana</li>
          <li class="stateClass" data-state="ME" id="ME">Maine</li>
          <li class="stateClass" data-state="MD" id="MD">Maryland</li>
          <li class="stateClass" data-state="MA" id="MA">Massachusetts</li>
          <li class="stateClass" data-state="MI" id="MI">Michigan</li>
          <li class="stateClass" data-state="MN" id="MN">Minnesota</li>
          <li class="stateClass" data-state="MS" id="MS">Mississippi</li>
          <li class="stateClass" data-state="MO" id="MO">Missouri</li>
          <li class="stateClass" data-state="MT" id="MT">Montana</li>
          <li class="stateClass" data-state="NE" id="NE">Nebraska</li>
          <li class="stateClass" data-state="NV" id="NV">Nevada</li>
          <li class="stateClass" data-state="NH" id="NH">New Hampshire	</li>
          <li class="stateClass" data-state="NJ" id="NJ">New Jersey</li>
          <li class="stateClass" data-state="NM" id="NM">New Mexico</li>
          <li class="stateClass" data-state="NY" id="NY">New York</li>
          <li class="stateClass" data-state="NC" id="NC">North Carolina</li>
          <li class="stateClass" data-state="ND" id="ND">North Dakota</li>
          <li class="stateClass" data-state="OH" id="OH">Ohio</li>
          <li class="stateClass" data-state="OK" id="OK">Oklahoma</li>
          <li class="stateClass" data-state="OR" id="OR">Oregon</li>
          <li class="stateClass" data-state="PA" id="PA">Pennsylvania</li>
          <li class="stateClass" data-state="RI" id="RI">Rhode Island</li>
          <li class="stateClass" data-state="SC" id="SC">South Carolina</li>
          <li class="stateClass" data-state="SD" id="SD">South Dakota</li>
          <li class="stateClass" data-state="TN" id="TN">Tennessee</li>
          <li class="stateClass" data-state="TX" id="TX">Texas</li>
          <li class="stateClass" data-state="UT" id="UT">Utah</li>
          <li class="stateClass" data-state="VT" id="VT">Vermont</li>
          <li class="stateClass" data-state="VA" id="VA">Virginia</li>
          <li class="stateClass" data-state="WA" id="WA">Washington</li>
          <li class="stateClass" data-state="WV" id="WV">West Virginia</li>
          <li class="stateClass" data-state="WI" id="WI">Wisconsin</li>
          <li class="stateClass" data-state="WY" id="WY">Wyoming</li>


      </ul>      
      
      <p id="demo"></p>
      <script>
        async function loadJSON() {
          let url = 'county-data/json/json_for_search.json';
          let response = await fetch(url);
          let json = await response.json();
          //At this point the JSON has been fetched and deserialized to
          // a JS object, as can be seen from the console if you load
          // this in the browser.
          // NOTE: You'll need to do something with the JSON at this point, e.g.
          // write the data values into hidden <li> tags inside each state
          // (with a class that allows you to use CSS to set the display so that they do not appear.
          // Downstream, in your click handler, the job will be to select
          // all the counties when a state is clicked and toggle their visibility.

          for (statePostal in json) {
            // For state in json,
            // 1) Look up the data values in the json (e.g. json[statePostal])
            // 2) Using the county data, construct a new unordered list for the state's counties
            // 3) Locate the li for the given state (this is hard-coded into page already)
            // 4) Insert the newly created unordered list of counties into the DOM (i.e. append 
            //   to the li for the state)
          }
        }

        // NOTE: You'll need to select all buttons to add the click handler,
        // (document.querySelector will only return the first button that is found)

        let stateList = document.querySelectorAll(".stateClass");
        let countyList = document.querySelectorAll(".countyClass");


        for (let stateNode of stateList) {
          stateNode.addEventListener("click", (event) => {
          // NOTE: Determine which state has been clicked
          // and toggle the visibility of the state's counties
          // See example of how to toggle at below URL
          // https://developer.mozilla.org/en-US/docs/Web/API/Element/classList#examples
          let state = event.target.dataset.state;
          // Something like below selector should work for toggling visibility
          // Below won't work until you've completed the process of writing the nested county lists
          // inside of the li for each state.
          event.target.querySelector('ul').classList.toggle('hidden');
          // Select the list of counties
          console.log(`Hide/show elements for ${state}`);
          });
        };
      </script>




<!-- 
          // You'll need a script that attaches an event handler
          // to the list items for the ul of states. The event handler function
          // can pluck the "data-state" value and use that to pull the list of counties
          // for the given state and render the counties visually.

          // You'll need to decide on the o 
          //  -->

      </div>
    </div>
  </body>
</html>
